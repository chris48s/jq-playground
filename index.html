<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css">
      <script src="https://cdn.jsdelivr.net/npm/jq-web@0.5.1/jq.wasm.js"></script>
      <style>
        #json_doc {
          font-family: monospace;
          width: 100%;
        }

        #query {
          font-family: monospace;
          width: calc(100% - 20px);
        }
      </style>
      <title>JQ Playground</title>
    </head>
    <body>
      <header><h1>JQ Playground</h1></header>
      <main>
<h2><label for="json_doc">JSON Document</label></h2>
<textarea
  cols="80"
  rows="15"
  spellcheck="false"
  name="json_doc"
  id="json_doc"
>
{
  "DB": {
    "host": "127.0.0.1",
    "port": "1221",
    "SID": "testDB"
  }
}
</textarea>
        <h2><label for="query">Query</label></h2>
        <input
          name="query"
          id="query"
          value=".DB.host"
        />

        <h2>Result</h2>
        <div id="result"></div>
      </main>

      <script>
        const jsonDoc = document.getElementById('json_doc');
        const query = document.getElementById('query');
        const result = document.getElementById('result');

        function handle() {
          try {
            const parsedJson = JSON.parse(jsonDoc.value);
            result.innerHTML = '<pre><code>' + JSON.stringify(
              jq.json(parsedJson, query.value),
              null,
              2
            ) + '</code></pre>';
          } catch (error) {
            result.innerHTML = '<pre><code>' + error.message + '</code></pre>';
          }
        }

        jsonDoc.addEventListener('input', handle);
        query.addEventListener('input', handle);
        jq.onInitialized.addListener(handle);
      </script>
    </body>
  </html>
